<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" >
<head>
<link rel="Stylesheet" href="default.css" type="text/css" media="screen" />
<link rel="Stylesheet" href="human.css" type="text/css" media="screen" />
	<script type="text/javascript" src="DOMAlert.js"></script>
	<script type="text/javascript">
	/*<![CDATA[*/
	
		function setCookie(c_name,value,exdays)
		{
			var exdate=new Date();
			exdate.setDate(exdate.getDate() + exdays);
			var c_value=escape(value) + ((exdays==null) ? "" : "; expires="+exdate.toUTCString());
			document.cookie=c_name + "=" + c_value;
		}
		
		function getCookie(c_name)
		{
			var i,x,y,ARRcookies=document.cookie.split(";");
			for (i=0;i<ARRcookies.length;i++)
			{
			  x=ARRcookies[i].substr(0,ARRcookies[i].indexOf("="));
			  y=ARRcookies[i].substr(ARRcookies[i].indexOf("=")+1);
			  x=x.replace(/^\s+|\s+$/g,"");
			  if (x==c_name)
				{
				return unescape(y);
				}
			}
		}
		
		function checkCookie()
		{
			var email=getCookie("email");
			if (email==null || email=="")
			{
				doAlert();
			}
		}
	
		function doAlert(parent)
		{
			var msg = new DOMAlert(
			{
				title: 'yosy.org',
				text: '<div style="padding:10px">Es recomendable que dé datos, su correo mismamente, para mantenerle al tanto como un champ. Si así lo desea, '
					  +'introdúzcalo a continuación y clique sobre \'Aceptar\' <br><br> <input value="correo@valido.es" id="MPCorreo"/></div>',
				skin: 'default',
				width: 300,
				height: 300,
				ok: {value: true, text: 'Aceptar', onclick: showValue},
				cancel: {value: false, text: 'Cancelar', onclick: showValue }
			});
			msg.show();
		};
		
		function showValue(sender, value)
		{
			var email = document.getElementById('MPCorreo').value;
			sender.close();
			if(value)
			{
				setCookie("email",email,36500);
				var newMsg = new DOMAlert({skin: 'default', width: 200});
				newMsg.show("yosy.org", "<div style='padding:10px'>Gracias, de ahora en adelante le mantendremos informado en la siguiente cuenta de correo: "+email+"</div>");
			}
		}
	/*]]>*/
	</script>
	<title>Test</title>
</head>
<body>
<div>
<button onclick="doAlert();">Test</button>
</div>
</body>
</html>